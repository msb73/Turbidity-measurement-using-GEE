<!DOCTYPE html>
<html>

<head>


    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/fol.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/dropdowncode.css') }}">

    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>

    <style>
        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <style>
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
    </style>

    <!-- For maps -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css" />
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css" />



    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script> -->

    <!-- For UI -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>


    <!-- For icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">





    <!-- for calendar    -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>


</head>

<body>

    <div class="wrapper">
        <input type="checkbox" id="btn" hidden checked>
        <label for="btn" class="menu-btn">
            <i class="fas fa-bars"></i>
            <i class="fas fa-times"></i>
        </label>
        <nav id="sidebar">
            <div class="title">Turbidity Measure</div>
            <ul class="list-items">
                <br>
                <form>
                    <div class="row form-group">
                        <p class="labels"> Date from :</p>
                        <div class="col-sm-11">
                            <div class="input-group date" id="datepickerfrom">
                                <input type="text" class="form-control">
                                <span class="input-group-append">

                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <p class="labels"> Date to :</p>
                        <div class="col-sm-11">
                            <div class="input-group date" id="datepickerto">
                                <input type="text" class="form-control">
                                <span class="input-group-append">

                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <p class="labels">Select location :</p>
                        <div class="dropdown">
                            <button class="dropdown-toggle col-sm-11" type="button" data-toggle="dropdown">Select an
                                option</button>
                            <ul class="dropdown-menu col-sm-10">
                                <li><a class="dropdown-item" href="#" data-value="Khadakwasla">Khadakwasla Dam</a></li>
                                <li><a class="dropdown-item" href="#" data-value="Jambhulwadi">Jambhulwadi Lake</a></li>
                                <li><a class="dropdown-item" href="#" data-value="MulaMutha">Mula Mutha River</a></li>
                            </ul>
                        </div>
                    </div>



                </form>
                <!-- <li><a href="#"><i class="fas fa-envelope"></i>Contact us</a></li> -->
                <button type="button" class="sidebar-button">SUBMIT</button>
                <div class="icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-github"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </ul>
        </nav>
    </div>

    <div class="folium-map" id="map_f53e9594b00a751a13c413ab606fd6bc"></div>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>


<script type="text/javascript">

    var fromdate = "";
    var todate = "";
    var selocation = "";


    $('#datepickerfrom').datepicker().on('changeDate', function (e) {
        var selectedDate = moment(e.date).format('DD-MM-YYYY');
        fromdate = selectedDate;
        console.log("asaf", fromdate)

        $(this).datepicker('hide');
    });
    $('#datepickerto').datepicker().on('changeDate', function (e) {
        var selectedDate = moment(e.date).format('DD-MM-YYYY');
        todate = selectedDate;

        $(this).datepicker('hide');
    });

    $('.dropdown-item').on('click', function () {
        var value = $(this).data('value');
        $('.dropdown-toggle').text($(this).text());
        selocation = value;



    });


    const btn = document.querySelector('#btn');
    const button = document.querySelector('.sidebar-button');

    button.addEventListener('click', () => {
        if (!selocation) {
            console.log("Fill details")
        } else {
            

            const submitdata = {
                P_fromdate: fromdate,
                P_todate: todate,
                P_selocation: selocation
            };

            fetch('/submitdata', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(submitdata)
            })
                .then(response => response.json())
                .then(data => {
                    btn.checked = false;
                    console.log('Success:', data);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });

        }

    });
</script>
<script>


    var map_f53e9594b00a751a13c413ab606fd6bc = L.map(
        "map_f53e9594b00a751a13c413ab606fd6bc",
        {
            center: [18.41, 73.74],
            crs: L.CRS.EPSG3857,
            zoom: 12,
            zoomControl: true,
            preferCanvas: false,
        }
    );





    var tile_layer_a512e8887d72988e0a29e40651858fee = L.tileLayer(
        "https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg",
        { "attribution": "Map tiles by \u003ca target=\"_blank\" href=\"http://stamen.com\"\u003eStamen Design\u003c/a\u003e, under \u003ca target=\"_blank\" href=\"http://creativecommons.org/licenses/by/3.0\"\u003eCC BY 3.0\u003c/a\u003e. Data by \u0026copy; \u003ca target=\"_blank\" href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca target=\"_blank\" href=\"http://creativecommons.org/licenses/by-sa/3.0\"\u003eCC BY SA\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false }
    ).addTo(map_f53e9594b00a751a13c413ab606fd6bc);


    var tile_layer_9da3f6754a04d72373cf10c77ef8c703 = L.tileLayer(
        "https://mt1.google.com/vt/lyrs=m\u0026x={x}\u0026y={y}\u0026z={z}",
        { "attribution": "Google", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false }
    ).addTo(map_f53e9594b00a751a13c413ab606fd6bc);


    var tile_layer_c4da5408467c1a44bd4fbdd41e1cd949 = L.tileLayer(
        "https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}",
        { "attribution": "Google", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false }
    ).addTo(map_f53e9594b00a751a13c413ab606fd6bc);


    var layer_control_175387e759eee6c93713ff2d8d96689f = {
        base_layers: {
            "stamenterrain": tile_layer_a512e8887d72988e0a29e40651858fee,
        },
        overlays: {
            "Google Maps": tile_layer_9da3f6754a04d72373cf10c77ef8c703,
            "Google Satellite": tile_layer_c4da5408467c1a44bd4fbdd41e1cd949,
        },
    };
    L.control.layers(
        layer_control_175387e759eee6c93713ff2d8d96689f.base_layers,
        layer_control_175387e759eee6c93713ff2d8d96689f.overlays,
        { "autoZIndex": true, "collapsed": true, "position": "topright" }
    ).addTo(map_f53e9594b00a751a13c413ab606fd6bc);

</script>
<!-- Optional JavaScript; choose one of the two! -->


</html>